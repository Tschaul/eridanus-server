{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "anyOf": [
        {
            "properties": {
                "password": {
                    "type": "string"
                },
                "type": {
                    "enum": [
                        "AUTHENTICATE"
                    ],
                    "type": "string"
                },
                "userId": {
                    "type": "string"
                }
            },
            "required": [
                "password",
                "type",
                "userId"
            ],
            "type": "object"
        },
        {
            "properties": {
                "command": {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/SignUpUserCommand"
                        },
                        {
                            "$ref": "#/definitions/CreateGameCommand"
                        },
                        {
                            "$ref": "#/definitions/JoinGameCommand"
                        },
                        {
                            "$ref": "#/definitions/ReadyForGameCommand"
                        },
                        {
                            "$ref": "#/definitions/UpdateWorldOrdersCommand"
                        },
                        {
                            "$ref": "#/definitions/UpdateFleetOrdersCommand"
                        }
                    ]
                },
                "commandId": {
                    "type": "string"
                },
                "gameId": {
                    "type": [
                        "null",
                        "string"
                    ]
                },
                "type": {
                    "enum": [
                        "COMMAND"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "command",
                "commandId",
                "type"
            ],
            "type": "object"
        },
        {
            "properties": {
                "gameId": {
                    "type": [
                        "null",
                        "string"
                    ]
                },
                "id": {
                    "type": "string"
                },
                "subscription": {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/GamesListAllSubscription"
                        },
                        {
                            "$ref": "#/definitions/GameStateSubscription"
                        },
                        {
                            "$ref": "#/definitions/GameInfoSubscription"
                        },
                        {
                            "$ref": "#/definitions/GameMetaDataSubscription"
                        }
                    ]
                },
                "type": {
                    "enum": [
                        "BEGIN_SUBSCRIPTION"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "id",
                "subscription",
                "type"
            ],
            "type": "object"
        },
        {
            "properties": {
                "id": {
                    "type": "string"
                },
                "type": {
                    "enum": [
                        "END_SUBSCRIPTION"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "id",
                "type"
            ],
            "type": "object"
        }
    ],
    "definitions": {
        "AwaitCaptureOrder": {
            "properties": {
                "type": {
                    "enum": [
                        "AWAIT_CAPTURE"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "type"
            ],
            "type": "object"
        },
        "BuildIndustryOrder": {
            "properties": {
                "amount": {
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "BUILD_INDUSTRY"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "BuildShipsOrder": {
            "properties": {
                "amount": {
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "BUILD_SHIPS"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "CreateGameCommand": {
            "properties": {
                "gameId": {
                    "type": "string"
                },
                "type": {
                    "enum": [
                        "GAME/CREATE"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "gameId",
                "type"
            ],
            "type": "object"
        },
        "DropMetalOrder": {
            "properties": {
                "amount": {
                    "maximum": 99,
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "DROP_METAL"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "DropPopulationOrder": {
            "properties": {
                "amount": {
                    "maximum": 99,
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "DROP_POPULATION"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "DropShipsOrder": {
            "properties": {
                "amount": {
                    "maximum": 99,
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "DROP_SHIPS"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "GameInfoSubscription": {
            "properties": {
                "type": {
                    "enum": [
                        "GAME/INFO"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "type"
            ],
            "type": "object"
        },
        "GameMetaDataSubscription": {
            "properties": {
                "type": {
                    "enum": [
                        "GAME/META_DATA"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "type"
            ],
            "type": "object"
        },
        "GameStateSubscription": {
            "properties": {
                "type": {
                    "enum": [
                        "GAME/STATE"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "type"
            ],
            "type": "object"
        },
        "GamesListAllSubscription": {
            "properties": {
                "type": {
                    "enum": [
                        "GAME/LIST_ALL"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "type"
            ],
            "type": "object"
        },
        "JoinGameCommand": {
            "properties": {
                "gameId": {
                    "type": "string"
                },
                "type": {
                    "enum": [
                        "GAME/JOIN"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "gameId",
                "type"
            ],
            "type": "object"
        },
        "LoadMetalOrder": {
            "properties": {
                "amount": {
                    "maximum": 99,
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "LOAD_METAL"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "LoadPopulationOrder": {
            "properties": {
                "amount": {
                    "maximum": 99,
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "LOAD_POPULATION"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "LoadShipsOrder": {
            "properties": {
                "amount": {
                    "maximum": 99,
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "LOAD_SHIPS"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "ReadyForGameCommand": {
            "properties": {
                "gameId": {
                    "type": "string"
                },
                "type": {
                    "enum": [
                        "GAME/READY"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "gameId",
                "type"
            ],
            "type": "object"
        },
        "ScrapShipsForIndustryOrder": {
            "properties": {
                "amount": {
                    "maximum": 99,
                    "minimum": 1,
                    "type": "integer"
                },
                "type": {
                    "enum": [
                        "SCRAP_SHIPS_FOR_INDUSTRY"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "type"
            ],
            "type": "object"
        },
        "SignUpUserCommand": {
            "properties": {
                "email": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                },
                "type": {
                    "enum": [
                        "SIGN_UP_USER"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "email",
                "id",
                "password",
                "type"
            ],
            "type": "object"
        },
        "UpdateFleetOrdersCommand": {
            "properties": {
                "fleetId": {
                    "type": "string"
                },
                "orders": {
                    "items": {
                        "anyOf": [
                            {
                                "$ref": "#/definitions/AwaitCaptureOrder"
                            },
                            {
                                "$ref": "#/definitions/WarpOrder"
                            },
                            {
                                "$ref": "#/definitions/LoadMetalOrder"
                            },
                            {
                                "$ref": "#/definitions/DropMetalOrder"
                            },
                            {
                                "$ref": "#/definitions/LoadShipsOrder"
                            },
                            {
                                "$ref": "#/definitions/DropShipsOrder"
                            },
                            {
                                "$ref": "#/definitions/LoadPopulationOrder"
                            },
                            {
                                "$ref": "#/definitions/DropPopulationOrder"
                            }
                        ]
                    },
                    "type": "array"
                },
                "type": {
                    "enum": [
                        "ORDERS/UPDATE_FLEET"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "fleetId",
                "orders",
                "type"
            ],
            "type": "object"
        },
        "UpdateWorldOrdersCommand": {
            "properties": {
                "orders": {
                    "items": {
                        "anyOf": [
                            {
                                "$ref": "#/definitions/BuildShipsOrder"
                            },
                            {
                                "$ref": "#/definitions/BuildIndustryOrder"
                            },
                            {
                                "$ref": "#/definitions/ScrapShipsForIndustryOrder"
                            }
                        ]
                    },
                    "type": "array"
                },
                "type": {
                    "enum": [
                        "ORDERS/UPDATE_WORLD"
                    ],
                    "type": "string"
                },
                "worldId": {
                    "type": "string"
                }
            },
            "required": [
                "orders",
                "type",
                "worldId"
            ],
            "type": "object"
        },
        "WarpOrder": {
            "properties": {
                "targetWorldId": {
                    "type": "string"
                },
                "type": {
                    "enum": [
                        "WARP"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "targetWorldId",
                "type"
            ],
            "type": "object"
        }
    }
}

